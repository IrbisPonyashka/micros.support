(function(){"use strict";var t={7175:function(t,e,a){var n=a(9242),r=a(3396);const i={class:"auth__page"};function s(t,e,a,n,s,o){const l=(0,r.up)("Grid"),c=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(c,null,{default:(0,r.w5)((()=>[(0,r._)("div",i,[(0,r.Wm)(l,{tasksObj:s.tasksList},null,8,["tasksObj"])])])),_:1})}var o=a(65);const l={class:"main-grid"},c={class:"main-grid-container"};function u(t,e,a,n,i,s){const o=(0,r.up)("GridHead"),u=(0,r.up)("GridBody");return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",c,[(0,r.Wm)(o),(0,r.Wm)(u,{tasksObj:i.tasks},null,8,["tasksObj"])])])}var d=a(7139);const p={class:"main-grid-header"},m={class:"main-grid-row-head"},h={class:"main-grid-cell-inner"},f={class:"main-grid-cell-head-container"},g={class:"main-grid-head-title"},v=(0,r._)("span",{class:"main-grid-resize-button",title:"{{title}}"},null,-1),k=(0,r._)("span",{class:"main-grid-control-sortmain-grid-control-sort-desc"},null,-1);function b(t,e,a,n,i,s){return(0,r.wg)(),(0,r.iD)("div",p,[(0,r._)("div",m,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.headerTitles,(t=>((0,r.wg)(),(0,r.iD)("div",{class:(0,d.C_)(["main-grid-cell-head main-grid-cell-left",t])},[(0,r._)("div",h,[(0,r._)("span",f,[(0,r._)("span",g,(0,d.zw)(t),1),v,k])])],2)))),256))])])}var O={name:"GridHead",data(){return{headerTitles:["Название","Активность","Крайний срок","Постановщик","Ответственный","Проект"]}},methods:{},computed:{},created(){},watch:{}},y=a(89);const w=(0,y.Z)(O,[["render",b]]);var j=w,_=a.p+"img/loader.87bd8715.gif";const D={class:"main-grid-body"},S={class:"main-grid-row main-grid-row-body"},A={class:"main-grid-cell-inner"},P={class:"main-grid-cell-content"},N={key:0,class:"main-grid-loader"},T=(0,r._)("img",{class:"main-grid-loader-gif",alt:"loader.gif",src:_},null,-1),C=[T];function G(t,e,a,n,i,s){const o=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",D,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.tasksList,(t=>((0,r.wg)(),(0,r.iD)("div",S,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t,(t=>((0,r.wg)(),(0,r.iD)("div",{class:(0,d.C_)(["main-grid-cell",t.name])},[(0,r._)("div",A,[(0,r._)("span",P,["title"!=t.name?((0,r.wg)(),(0,r.iD)("a",{key:0,class:(0,d.C_)(["main-grid-cell-task",{"ui-label ui-label-default ui-label-fill ui-label-link":"deadline"===t.name}])},(0,d.zw)(t.value.name?t.value.name:t.value),3)):(0,r.kq)("",!0),"title"==t.name?((0,r.wg)(),(0,r.j4)(o,{key:1,class:(0,d.C_)(["main-grid-cell-task",{"ui-label ui-label-default ui-label-fill ui-label-link":"deadline"===t.name}]),to:{name:"Item",params:{id:3}}},{default:(0,r.w5)((()=>[(0,r.Uk)((0,d.zw)(t.value.name?t.value.name:t.value),1)])),_:2},1032,["class"])):(0,r.kq)("",!0)])])],2)))),256))])))),256)),i.loader?((0,r.wg)(),(0,r.iD)("div",N,C)):(0,r.kq)("",!0)])}a(7658);var I={name:"GridBody",props:{tasksObj:{type:Object,required:!0}},data(){return{appAuth:{},tasksList:{},loader:!1}},methods:{},computed:{},created(){},watch:{tasksObj:{immediate:!0,handler(t,e){if(Object.keys(t).length>0){let n=["title","activityDate","deadline","creator","responsible","group"];var a=[];function r(t){const e={year:"numeric",month:"long",day:"numeric"},a=new Date(t).toLocaleDateString(void 0,e);return a}for(let i=0;i<this.tasksObj.length;i++){let s=0;a.push(n.map((t=>(s++,"activityDate"==t||"deadline"==t?(this.tasksObj[i][t]=null==this.tasksObj[i][t]?"Без срока":r(this.tasksObj[i][t]),{id:s,name:t,value:this.tasksObj[i][t]}):{id:s,name:t,value:this.tasksObj[i][t]}))))}this.tasksList=a,this.loader=!1}else 0==Object.keys(t).length&&(this.loader=!0)}}}};const J=(0,y.Z)(I,[["render",G]]);var L=J,M={name:"Grid",props:{tasksObj:{type:Object,required:!0}},data(){return{appAuth:{},tasks:{}}},components:{GridHead:j,GridBody:L},methods:{},computed:{},created(){},watch:{tasksObj:{immediate:!0,handler(t,e){Object.keys(t).length>0&&(this.tasks=this.tasksObj)}}}};const x=(0,y.Z)(M,[["render",u]]);var E=x;async function H(t,e,a,n){var r=new Headers;r.append("Content-Type","application/json");var i=JSON.stringify(a),s={method:"POST",headers:r,body:i,redirect:"follow"};return fetch(`https://${t}/rest/${e}?auth=${n}`,s).then((t=>t.text())).then((t=>t)).catch((t=>console.log("error",t)))}var q={name:"HomeView",data(){return{appAuth:{},tasksList:{},projectsId:[]}},components:{Grid:E},computed:{...(0,o.Se)(["getUserData"]),...(0,o.Se)(["getAppData"])},async created(){await this.$store.dispatch("getAuthPortal"),await this.$store.dispatch("getAuth"),this.projectsId=[this.getUserData.projectsID]},watch:{projectsId:{immediate:!0,async handler(t,e){if(sessionStorage.tasks_list)this.tasksList=JSON.parse(sessionStorage.tasks_list),console.log("из сессии");else if(t.length>0){this.appAuth=this.getAppData;let t=this.projectsId,e={filter:{GROUP_ID:t[0]}};var a=await H("cp.micros.uz","tasks.task.list",e,this.appAuth.access_token);JSON.parse(a)&&(sessionStorage.tasks_list=JSON.stringify(JSON.parse(a).result.tasks),this.tasksList=JSON.parse(a).result.tasks,console.log("из rest запроса"))}}}}};const z=(0,y.Z)(q,[["render",s]]);var B=z,U=a(2483);const Z=(0,r._)("h1",null,"Item Page",-1),$=[Z];function K(t,e,a,n,i,s){return(0,r.wg)(),(0,r.iD)("div",null,$)}var F={name:"Item"};const W=(0,y.Z)(F,[["render",K]]);var Y=W;const R=[{path:"/",name:"AuthForm",component:()=>a.e(892).then(a.bind(a,2923))},{path:"/item/:id",name:"Item",component:Y}],V=(0,U.p7)({history:(0,U.PO)(),routes:R});var X=V,Q=(0,o.MT)({state:{userData:{},techPortal:{}},getters:{getUserData(t){return t.userData},getAppData(t){return t.techPortal}},mutations:{userDataMutation(t,e){return t.userData=e},appDataMutation(t,e){return t.techPortal=e}},actions:{async getAuth({commit:t}){if(sessionStorage.client_token)t("userDataMutation",JSON.parse(sessionStorage.client_token));else;},async getAuthPortal({commit:t}){if(!sessionStorage.tech_token){var e={method:"POST",redirect:"follow"};return fetch("https://micros.uz/it/solutions_our/micros.tech.support/ajax.php?APP_TOKEN=true",e).then((t=>t.text())).then((e=>{sessionStorage.tech_token=e,t("appDataMutation",JSON.parse(e))})).catch((t=>console.log("error",t)))}t("appDataMutation",JSON.parse(sessionStorage.tech_token))}},modules:{}});{const t=document.createElement("script");t.src="//api.bitrix24.com/api/v1/";document.head.appendChild(t);t.onload=function(){sessionStorage.client_token||BX24.callMethod("app.option.get",{},(t=>{sessionStorage.client_token=JSON.stringify(t.data())}))}}(0,n.ri)(B).use(Q).use(X).mount("#app")}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,n,r,i){if(!n){var s=1/0;for(u=0;u<t.length;u++){n=t[u][0],r=t[u][1],i=t[u][2];for(var o=!0,l=0;l<n.length;l++)(!1&i||s>=i)&&Object.keys(a.O).every((function(t){return a.O[t](n[l])}))?n.splice(l--,1):(o=!1,i<s&&(s=i));if(o){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[n,r,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,n){return a.f[n](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+".f47a8d27.js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="micros.support:";a.l=function(n,r,i,s){if(t[n])t[n].push(r);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==e+i){o=d;break}}o||(l=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",e+i),o.src=n),t[n]=[r];var p=function(e,a){o.onerror=o.onload=null,clearTimeout(m);var r=t[n];if(delete t[n],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((function(t){return t(a)})),e)return e(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),l&&document.head.appendChild(o)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){var t={143:0};a.f.j=function(e,n){var r=a.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(a,n){r=t[e]=[a,n]}));n.push(r[2]=i);var s=a.p+a.u(e),o=new Error,l=function(n){if(a.o(t,e)&&(r=t[e],0!==r&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;o.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,r[1](o)}};a.l(s,l,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,n){var r,i,s=n[0],o=n[1],l=n[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(l)var u=l(a)}for(e&&e(n);c<s.length;c++)i=s[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(u)},n=self["webpackChunkmicros_support"]=self["webpackChunkmicros_support"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(7175)}));n=a.O(n)})();
//# sourceMappingURL=app.0a37f1ca.js.map